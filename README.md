
# Skotch

An app for personal notes and recommendations from friends

## Frameworks, Languages
Skotch is a cross platform app :
* based on VueJS
* using Quasar Framework that allows us to simplify coding iOs and Android versions.
* with html written in pug/jade.
* and CSS written in SASS
* you'll need nodeJS installed on your machine.

## Install the dependencies & start the App
```bash  
yarn  
```  
### About environments
Skotch runs on 2 separate environments:
* beta
* production.

We use quasar extension QENV to create distinct variables for each environment.  
You can find .quasar.env.json at the root. It contains all the variables for each environment.   
It allows the app to inject specific data, conditions or simple strings according to the context.
> 1. As a contributor you'll only work in beta environment.
> 2. You are denied the right to commit files in Master branch. Consequently, you must not run the App in production environment except if you're told to do so. (see Basic dev process)


### Start the app in Beta environment
#### on Windows
```bash  
cross-env QENV=beta quasar dev
```  
#### elsewhere
```bash  
QENV=beta quasar dev
```  

## Deploy Process on beta.skotch.app

1. Commit/push your local branches to distant repo
2. Create a merge request
3. Ask for validation or validate the merge yourself if you have the rights
4. On your machine, checkout origin/beta
5. Build PWA Beta Version
```bash  
cross-env QENV=beta quasar build -m pwa
```  
6. Tell Firebase to use beta hosting project
```bash  
firebase use hatodo-test
```  
7. Deploy on beta
```bash  
firebase deploy --only hosting
```  

## Basic dev process
* Each time you work on an issue or a group of issues, you create a branch from beta.
* Every once in a while, branches will be merged in beta to be tested in https://beta.skotch.app by trusted users.
* Once tested and people satisfied, we merge beta in master to put all the work in production running at https://skotch.app
* That's it.

## Project & App Configuration
You may wonder where some of the datas or words or icons come from and how it works.  Here are some hints.

The main project and app configuration files are :
* **package.json**
  * All dependencies
  * basic stuff concerning the project and repository.
  * hooks to start the project
> Note : We don't use package.json as a source for any readable content in the app (e.g. : The name is only for the repo, not the App)
* **quasar.conf.js**
  * a shit ton of stuff that you  don't want to touch.
  * some reusable htmlVariables that you can enrich with your own needs (e.g. : you need to inject a string that's gonna be useful for 2 meta. you create a variable, name it (key), write a value, and use the key in index.template.html
  * a control on which variables you need from quasar.env.json and with what hook you want to inject them in index.template.html (see exports > build > env : verstionTitle is used in index.template.html, and uses env.VERSION_NAME)
* **quasar.env.json**
  * That's where the keys and values are created for each environment.
  * You can create what you need here. Let's say you want to have a different favicon in beta and prod, you can add a key (i.e : VERSION_FAVICON) and specify a file name for each version.
  * You may want this file to be the main file to edit concerning app name, description, url, etc.
* **index.template.html**
  * Stuff are injected here. That's the index.
  * You can add some meta or other stuff in the head if you need.
  * Don't look for :
    * *manifest.json* (autogenerated by quasar - see quasar.conf)
    * *apple icons* or *apple app related meta* or *windows app related stuff* (same here - see quasar.conf)

## SASS & PUG
To have a better understanding of the code, we use pug and sass.
It's also way faster than any other way to write html or css.

### The CSS
It's based on sass variables, style partials, and everything is imported in main.css at the end.
For components, the sass corresponding file is directly located in the folder, and clearly separated from the vue.js file. It helps us distributing the work and tasks correctly.
#### About skotch.sass & skotch-mobile.sass
You have :
* Generic rules in skotch.sass that only concerns app specific stuff such as :
  * skotchlists (skl)
  * skotchs (sk)
  * tags (skTags)
  * contacts (ct)
* The vast majority of the rest is named after the .pug or .vue files and concerns specific rules.
* **ALL** Mobile rules are in skotch-mobile.sass
#### About skl-data.sass
It contains all the rules concerning skotchlists colors, icons, and exclusive functions. The principle is simple but very useful :
* We request an uid from the database and make it an id in the html
* we create rules specific for this id.
* it allows us to display or hide stuff according to the list where we are without engaging any JS.
#### About ct-data.sass
It contains  all the css needed to create multiple color background avatar for users. It's like a randomizer, sort of.
* we use the uid of each contact and make it an id in html
* thx to css, we check the first car of this id, and chosose a color for it.
* thx to sass functions, from 10 initial colors, we can make 50 out of them :
```bash  
lighten($colorname, n%)
darken($colorname, n%)
desaturate($colorname, n%)
saturate($colorname, n%)
```  